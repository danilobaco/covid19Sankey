<html>
  <head>
  <meta  charset="iso-8859-1â€³>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">	
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
	//var select=[]
      google.charts.load('current', {'packages':['sankey']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
      $.get("saidaReordered.csv", function(csvString) {
      // fetch CSV file using ajax
      
	  //colorbrewer2=paste1 colorscheme -> https://colorbrewer2.org/#type=qualitative&scheme=Pastel1&n=5
	  var colors = 	['#fed9a6','#fed9a6','#decbe4','#decbe4','#ccebc5', '#b3cde3','#ccebc5','#fbb4ae','#b3cde3','#fbb4ae','#fed9a6', '#decbe4', '#ccebc5', '#b3cde3', '#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae'];
	  
	  //rainbow
	  //var colors = 	['blue','blue','green','green','yellow', 'orange','yellow','red','orange','red','blue', 'green', 'yellow', 'orange', 'red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red'];
				
	  var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
		var data = new google.visualization.DataTable();
        data.addColumn('string', 'From');
        data.addColumn('string', 'To');
		data.addColumn('number', 'Costumers');      
		data.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
        //data.addColumn({type: 'string', role: 'tooltip'});
        data.addRows(arrayData);
		// Sets chart options.
        var options = {
          width: 800,
		  height: 300,
		  sankey: {
			iterations: 0,
			node: { 
				label: {
				  fontName: 'Times-Roman',
				  fontSize: 10,
				  color: '#000',
				  bold: true,
				  italic: false
				},
			
			//labelPadding: -300,
				//colorMode: 'category',
				nodePadding: 25 , 
				width: 15 ,
				colors:colors,
				interactivity: true,
			},
			link: {
				//color: { stroke: 'grey', strokeWidth: 0.5 },
				colorMode: 'gradient',
				//colorMode: 'source',
				//colors: colors,
				interactivity: true
			}
		   }
			
		};

        // Instantiates and draws our chart, passing in some options.
        var chart = new google.visualization.Sankey(document.getElementById('sankey_basic', 'HTML_tooltip'));
		chart.draw(data, options);
		});
		
		
	  $.get("saidaReorderedPop.csv", function(csvString) {
      // fetch CSV file using ajax
      
	  //colorbrewer2=paste1 colorscheme -> https://colorbrewer2.org/#type=qualitative&scheme=Pastel1&n=5
	  var colors = 	['#fed9a6','#fed9a6','#decbe4','#decbe4','#ccebc5', '#b3cde3','#ccebc5','#fbb4ae','#b3cde3','#fbb4ae','#fed9a6', '#decbe4', '#ccebc5', '#b3cde3', '#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae'];
	  
	  //rainbow
	  //var colors = 	['blue','blue','green','green','yellow', 'orange','yellow','red','orange','red','blue', 'green', 'yellow', 'orange', 'red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red'];
				
	  var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
		var data1 = new google.visualization.DataTable();
        data1.addColumn('string', 'From');
        data1.addColumn('string', 'To');
		data1.addColumn('number', 'Costumers');      
		data1.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
        //data.addColumn({type: 'string', role: 'tooltip'});
        data1.addRows(arrayData);
		// Sets chart options.
        var options = {
          width: 800,
		  height: 350,
		  sankey: {
			iterations: 0,
			node: { 
				label: {
				  fontName: 'Times-Roman',
				  fontSize: 10,
				  color: '#000',
				  bold: true,
				  italic: false
				},
			
			//labelPadding: -300,
				//colorMode: 'category',
				nodePadding: 25 , 
				width: 15 ,
				colors:colors,
				interactivity: true,
			},
			link: {
				//color: { stroke: 'grey', strokeWidth: 0.5 },
				colorMode: 'gradient',
				//colorMode: 'source',
				//colors: colors,
				interactivity: true
			}
		   }
			
		};

	   
		
		var chart1 = new google.visualization.Sankey(document.getElementById('sankey_basic2', 'HTML_tooltip2'));
		chart1.draw(data1, options,);
		
		});
		
		$.get("saidaReorderedDemog.csv", function(csvString) {
      // fetch CSV file using ajax
      
	  //colorbrewer2=paste1 colorscheme -> https://colorbrewer2.org/#type=qualitative&scheme=Pastel1&n=5
	  var colors = 	['#fed9a6','#fed9a6','#decbe4','#decbe4','#ccebc5', '#b3cde3','#ccebc5','#fbb4ae','#b3cde3','#fbb4ae','#fed9a6', '#decbe4', '#ccebc5', '#b3cde3', '#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae','#fed9a6','#decbe4', '#ccebc5', '#b3cde3','#fbb4ae'];
	  
	  //rainbow
	  //var colors = 	['blue','blue','green','green','yellow', 'orange','yellow','red','orange','red','blue', 'green', 'yellow', 'orange', 'red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red','blue','green', 'yellow', 'orange','red'];
				
	  var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
		var data2 = new google.visualization.DataTable();
        data2.addColumn('string', 'From');
        data2.addColumn('string', 'To');
		data2.addColumn('number', 'Costumers');      
		data2.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
        //data.addColumn({type: 'string', role: 'tooltip'});
        data2.addRows(arrayData);
		// Sets chart options.
        var options = {
          width: 800,
		  height: 350,
		  sankey: {
			iterations: 0,
			node: { 
				label: {
				  fontName: 'Times-Roman',
				  fontSize: 10,
				  color: '#000',
				  bold: true,
				  italic: false
				},
			
			//labelPadding: -300,
				//colorMode: 'category',
				nodePadding: 25 , 
				width: 15 ,
				colors:colors,
				interactivity: true,
			},
			link: {
				//color: { stroke: 'grey', strokeWidth: 0.5 },
				colorMode: 'gradient',
				//colorMode: 'source',
				//colors: colors,
				interactivity: true
			}
		   }
			
		};

	   
		
		var chart2 = new google.visualization.Sankey(document.getElementById('sankey_basic3', 'HTML_tooltip3'));
		chart2.draw(data2, options,);
		
		});
		
		//chart.setSelection([{row:8, column:null},{row:62, column:null},{row:116, column:null}]);
		
		/*google.visualization.events.addListener(chart, 'select', function() {
              //var sel = chart.getSelection();
              //if (sel.length)
                //  alert('You selected node "' + sel[0].name + '"');
				//console.log("teste")
				//console.log(select)
				
				//for(var j=0;j<select.length;j++){
					//chart.setSelection(select[j]);
					//console.log("selecting")
				
				//}
				
				var selection = chart.getSelection();
				var message = '';
				console.log(selection[0]);
				for (var i = 0; i < selection.length; i++) {
					var item = selection[i];
					
					if (item.row != null && item.column != null) {
					  message += '{row:' + item.row + ',column:' + item.column + '}';
					} 
					else if (item.row != null) {
					  message += '{row:' + item.row + '}';
					  select.push(item);
					} else if (item.column != null) {
					  message += '{column:' + item.column + '}';
					}
					if(item.name != null){
						message += '{name:' + item.name + '}';
						
					}
				}
				if (message == '') {
						message = 'nothing';
				}
				alert('You selected ' + message);
		});*/
		
       
      }
	  
    </script>
  </head>
  <body>
  <div class="titulo1" style="float:left;">
        <h2>Sankey com 1 valor &uacutenico para todos os pa&iacuteses (espessuraLinha=valor=1)</h2>
   </div
	<div>
		<div id="sankey_basic" style="width: 900px; height: 320px;float:left;"></div>
		<div id="HTML_tooltip" style="position: relative;"></div>
	</div>
	 <div class="titulo2" style="float:left;">
            <h2>Sankey mapeando popula&ccedil&atildeo (espessuraLinha=valor=popula&ccedil&atildeo<a href="https://pt.wikipedia.org/wiki/Lista_de_pa%C3%ADses_por_popula%C3%A7%C3%A3o"><sup>[1]</sup></a>)</h2>
        </div>
	<div>
		<div id="sankey_basic2" style="width: 900px; height: 370px;float:left;"></div>
		<div id="HTML_tooltip2" style="position: relative;"></div>
	</div>
	<div class="titulo3" style="float:left;">
            <h2>Sankey mapeando densidade populacional - hab/m<sup>2</sup></br> (espessuraLinha=valor=densidadePopulacional<a href="https://pt.wikipedia.org/wiki/Lista_de_pa%C3%ADses_por_densidade_populacional"><sup>[2]</sup></a>)</h2>
        </div>
	<div>
		<div id="sankey_basic3" style="width: 900px; height: 370px;float:left;"></div>
		<div id="HTML_tooltip3" style="position: relative;"></div>
	</div>
   </body>
</html>
